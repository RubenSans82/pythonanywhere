{# pagina/daycare/templates/daycare/base.html #}
{% load static %} {# Necesario para {% static %} #}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Guarder칤a Canina{% endblock %}</title> {# Bloque para el t칤tulo espec칤fico de la p치gina #}

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    {# --- Icono de la pesta침a del navegador (favicon) --- #}

    <link rel="stylesheet" href="{% static 'daycare/css/style.css' %}">

    {% block extra_css %}

    {% endblock %} {# Bloque para CSS adicional espec칤fico de una p치gina #}

    <style>
        /* Asegura que el contenido principal no quede oculto por la barra fija */
        body {
             padding-top: 56px; /* Espacio necesario si la nav bar es fixed-top y mide 56px por defecto */
        }
        /* Puedes a침adir aqu칤 o en un archivo CSS externo estilos globales a la app */
         .messages { /* Estilo b치sico para los mensajes de Django */
             list-style: none;
             padding: 0;
             margin: 1rem 0;
         }
    </style>
</head>
<body>

    {# --- Barra de Navegaci칩n Unificada (Bootstrap Navbar) --- #}
    {# navbar-expand-lg: La barra se expande en pantallas grandes. navbar-dark bg-dark: Estilo oscuro. fixed-top: Fija la barra en la parte superior #}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            {# Brand/Logo - Enlace a la Landing Page (Inicio para no logueados) #}
            <a class="navbar-brand" href="{% url 'landing_page' %}">游냤 Tu Amigo Fiel</a>

            {# Bot칩n Toggler para la vista m칩vil (aparece en pantallas peque침as para colapsar el men칰) #}
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            {# Contenido colapsable de la barra de navegaci칩n #}
            <div class="collapse navbar-collapse" id="navbarNav">
                {# ml-auto / ms-auto en Bootstrap 5: Empuja los elementos a la derecha #}
                <ul class="navbar-nav ms-auto">

                    {# --- Enlaces Condicionales --- #}

                    {# --- Enlaces visbles SOLO si el usuario est치 autenticado --- #}
                    {% if user.is_authenticated %}

                        {# Enlaces para usuarios tipo Due침o (si NO son staff) #}
                        {% if not user.is_staff %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'daycare:home' %}">Mis Mascotas</a>
                       </li>
                       <li class="nav-item"> {# Elemento 'Reservas' (ahora ANTES) #}
                            <a class="nav-link" href="{% url 'daycare:mis_reservas' %}">Reservas</a>
                       </li>
                       <li class="nav-item"> {# Elemento 'Mi Perfil' (ahora DESPU칄S) #}
                            <a class="nav-link" href="{% url 'daycare:perfil_owner' %}">Mi Perfil</a>
                       </li>
                        {% endif %}

                        {# Enlaces para usuarios tipo Staff (si SON staff) #}
                        {% if user.is_staff %}
                            <li class="nav-item">
                                {# Usamos la etiqueta {% url %} para generar la URL basada en el name='staff_calendar' en daycare/urls.py #}
                                <a class="nav-link" href="{% url 'daycare:staff_calendar' %}">Calendario</a>
                            </li>
                            <li class="nav-item">
                                {# Enlace al listado de reservas para staff #}
                                <a class="nav-link" href="{% url 'daycare:staff_booking_list' %}">Gesti칩n Reservas (Staff)</a>
                            </li>
                            <li class="nav-item">
                                {# Enlace al panel de administraci칩n de Django #}
                                <a class="nav-link" href="{% url 'admin:index' %}">Admin</a>
                            </li>
                        {% endif %}

                        {# Enlace de Logout (visible para CUALQUIER usuario autenticado, sea due침o o staff) #}
                         <li class="nav-item">
                            {# {% url 'logout' %} asume que has incluido las URLs de auth de Django y se llaman 'logout' #}
                            <form action="{% url 'logout' %}" method="post" style="display: inline;">
                              {% csrf_token %} {# 춰Crucial para seguridad! A침ade el token CSRF #}
                              {# Usamos un bot칩n <button type="submit"> que se ve como un enlace #}
                              {# btn btn-link lo hace parecer un enlace. text-light para que se vea en fondo oscuro. #}
                              {# text-decoration: none; opcional si btn-link le a침ade subrayado que no quieres #}
                              <button type="submit" class="nav-link btn btn-link text-light" style="text-decoration: none;">
                                  Logout
                              </button>
                          </form>                         </li>

                    {# --- Enlaces visbles SOLO si el usuario NO est치 autenticado --- #}
                    {% else %}
                        {# Enlaces para visitantes en la Landing Page #}
                        {# Estos pueden ser enlaces a secciones dentro de la landing page (ej: /#services) #}
                        {# O enlaces a p치ginas dedicadas si decides separarlas despu칠s #}
                        <li class="nav-item">
                             {# Enlace a la secci칩n Servicios de la Landing. Aseg칰rate de que la secci칩n en landing.html tiene id="services" #}
                             <a class="nav-link" href="{% url 'landing_page' %}#services">Servicios</a>
                        </li>
                        <li class="nav-item">
                            {# Enlace a la secci칩n Sobre Nosotros de la Landing. Aseg칰rate de que la secci칩n en landing.html tiene id="about" #}
                            <a class="nav-link" href="{% url 'landing_page' %}#about">Sobre Nosotros</a>
                        </li>
                         <li class="nav-item">
                             {# Enlace a la secci칩n Contacto de la Landing. Aseg칰rate de que la secci칩n en landing.html tiene id="contact" #}
                            <a class="nav-link" href="{% url 'landing_page' %}#contact">Contacto</a>
                        </li>

                        {# Enlace de Login (a la p치gina de login de Django auth) #}
                        <li class="nav-item">
                            {# {% url 'login' %} asume que has incluido las URLs de auth de Django y se llaman 'login' #}
                            <a class="nav-link" href="{% url 'login' %}">Login</a>
                        </li>
                        <li class="nav-item">
                            {# Enlace a tu p치gina de registro de due침o #}
                            {# Usamos clases de Bootstrap para darle estilo de bot칩n y un poco de margen a la izquierda (ms-2) #}
                            <a class="btn btn-primary ms-2" href="{% url 'daycare:registro_owner' %}">Reg칤strate</a>
                        </li>
                    {% endif %}
                    {# --- Fin Enlaces Condicionales --- #}

                </ul>
            </div>
        </div>
    </nav>
    {# --- Fin Barra de Navegaci칩n Unificada --- #}

    {# Contenedor principal para el contenido de la p치gina, con margen superior para no chocar con la nav fija #}
    <div class="container mt-4">

        {# Mostrar mensajes de Django (success, error, info, warning) con estilos de Bootstrap #}
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    {# message.tags contendr치 las clases de mensaje de Django (ej: 'success', 'error', 'info', 'warning') #}
                    {# Usamos message.tags directamente como clase de alerta de Bootstrap (success, danger, info, warning) #}
                    <div class="alert alert-{{ message.tags }}" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            </ul>
        {% endif %}


        {% block content %}
        {# El contenido espec칤fico de cada plantilla hija ir치 aqu칤 #}
        {% endblock %}
    </div>

    {# --- Footer (Opcional en base, pero da consistencia) --- #}
    {# bg-light py-4: Fondo claro, padding vertical. mt-auto: Si el contenido es corto, el footer se pega al final #}
    <footer class="footer bg-light py-4 mt-auto">
        <div class="container text-center">
            <p class="mb-0">&copy; {% now "Y" %} Guarder칤a Canina "Tu Amigo Fiel".</p>
            {# Opcional: Enlaces a redes sociales, pol칤tica de privacidad, etc. #}
        </div>
    </footer>
    {# --- Fin Footer --- #}


    {# Scripts de Bootstrap (requieren Popper.js) - Incluir al final del body para no bloquear el renderizado inicial #}
    {# Estos scripts son necesarios para funcionalidades de Bootstrap como el colapso de la navbar en m칩vil, tooltips, popovers, etc. #}
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    {# Bloque para Scripts JS adicionales espec칤ficos de una p치gina #}
    {# Tus scripts de inicializaci칩n de datepicker, etc., ir치n aqu칤 #}
    {% block extra_js %}
    {% endblock %}

</body>
</html>