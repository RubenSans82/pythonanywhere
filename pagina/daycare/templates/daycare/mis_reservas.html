{# pagina/daycare/templates/daycare/mis_reservas.html #}
{% extends 'base.html' %}
{% load static %} {# Si usas archivos estáticos #}

{% block title %}Mis Reservas{% endblock %} {# Título específico para esta página #}

{# Puedes añadir bloques extra_css o extra_js si esta página los necesita #}
{# {% block extra_css %}{% endblock %} #}
{# {% block extra_js %}{% endblock %} #}

{% block content %}
    <h1 class="mb-4">Mis Reservas</h1> {# Encabezado de la página #}

    {# --- Botón para solicitar una nueva reserva --- #}
    {# Este botón redirigirá al formulario de solicitud de reserva #}
    <div class="mb-4"> {# Añade algo de margen inferior al botón #}
         <a href="{% url 'daycare:solicitar_reserva' %}" class="btn btn-primary">Solicitar Nueva Reserva</a> {# Ajusta la URL si 'solicitar_reserva' tiene otro nombre #}
    </div>

    {# --- Mostrar la Tabla de Reservas del Dueño --- #}
    {# Iteramos sobre la lista 'mis_reservas' que pasamos desde la vista #}
    {% if mis_reservas %}
        <div class="table-responsive"> {# Hace la tabla responsive en pantallas pequeñas (opcional, pero recomendado con Bootstrap) #}
            <table class="table table-striped table-hover"> {# Clases de Bootstrap para tablas bonitas #}
                <thead>
                    <tr>
                        {# Encabezados de la tabla AJUSTADOS a tu modelo Booking #}
                        <th>Mascota</th> {# Cambiado a singular #}
                        <th>Servicio</th>
                        <th>Fecha</th> {# Muestra la fecha de la reserva #}
                        <th>Hora</th> {# Muestra la hora de la reserva #}
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for reserva in mis_reservas %}
                        <tr>
                            {# --- Celdas de datos AJUSTADAS a tu modelo Booking --- #}
    
                            {# Columna Mascota -> Accede al nombre de la mascota relacionada #}
                            <td>{{ reserva.pet.nombre }}</td> {# Asume que tu modelo Pet tiene un campo 'nombre' #}
    
                            {# Columna Servicio -> Accede al objeto Service (se mostrará su __str__) #}
                            <td>{{ reserva.service }}</td>
    
                            {# Columna Fecha -> Accede al campo 'date' #}
                            <td>{{ reserva.date|date:"Y-m-d" }}</td> {# Formatea la fecha #}
    
                            {# Columna Hora -> Accede al campo 'time' #}
                             <td>{{ reserva.time|time:"H:i" }}</td> {# Formatea la hora #}
    
                            {# Columna Estado -> Accede al campo 'status' (mostrará el valor legible por los choices) #}
                            <td>{{ reserva.status }}</td>
    
                            {# Columna Acciones -> Sin cambios, depende de funcionalidades futuras #}
                            <td>
                                {# Puedes añadir enlaces/botones aquí si creas vistas para ver detalles o cancelar #}
                                {# Ejemplo: <a href="{% url 'daycare:detalle_reserva' reserva.pk %}" class="btn btn-sm btn-outline-info">Ver</a> #}
                                - {# Placeholder si no hay acciones definidas aún #}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        {# Mensaje si el usuario no tiene reservas #}
        <p class="text-muted text-center">Aún no tienes reservas registradas.</p>
    {% endif %}
    {# --- Fin Tabla de Reservas --- #}

{% endblock content %}